{% extends 'flatlab/admin/base.html' %}
{% load staticfiles %}
{% load widget_tweaks %}

{% block body %}
      <!--main content start-->
      <section id="main-content">
          <section class="wrapper">
            
            <section class="panel">
                          <header class="panel-heading">
                              <div class="row">
                                <div class="col-xs-9">
                                  {{ event.Name }}
                                </div>
                                <div class="col-xs-3 text-right">
                                  <a class="back" href="#"><i class="fa fa-angle-double-left"></i> Back</a>
                                </div>
                              </div>

                                  


                          </header>
                          <div class="panel-body">
                              <section id="unseen">
                                <table class="table table-striped table-condensed">
                                  
                                  <tbody>
                                  <tr>
                                      <td>Venue:</td>
                                      <td>
                                        {% if event.VenueName %}
                                          {{ event.VenueName }}
                                        {% else %}
                                          N/A
                                        {% endif %}
                                      </td>
                                      <td>Size:</td>
                                      <td class="numeric">{{ event.Capacity }} ppl</td>
                                      
                                  </tr>
                                  <tr>
                                      <td>Address:</td>
                                      <td>{{ event.Address }}</td>
                                      <td>Date:</td>
                                      <td>
                                        {% if event.StartDate == event.EndDate %}
                                          <p>{{ event.StartDate|date }}</p>
                                        {% else %}
                                          <p>{{ event.StartDate|date }} - {{ event.EndDate|date }}</p>
                                        {% endif %}
                                      </td>
                                  </tr>
                                  <tr>
                                      <td>City:</td>
                                      <td>{{ event.City }}</td>
                                      <td>Time:</td>
                                      <td>{{ event.pretty_StartTime }} - {{ event.pretty_EndTime }}</td>
                                  </tr>
                                  </tbody>
                                  
                              </table>
                              </section>
                          </div>
                      </section>


            <section class="panel">
                <div class="panel-body">
                <!-- this loads the map view -->
                <div id="date-1-map" class="tab-pane">
                        
                        <div class="row">
                          <div class="col-lg-12">
                                <div id="gmap_marker-1" class="gmaps"></div> 
                          </div>
                          
                        </div>

                        </div>
                </div>
            </section>        
            
            {% if form %}
            <section class="panel profile-info">
                          <form action="" method="post">
                              {% csrf_token %}
                              {{ form.message.errors }}
                              {{ form.message|add_class:"form-control input-lg p-text-area"}}
                              
                          
                          <footer class="panel-footer">
                              <button class="btn btn-danger pull-right" type="submit">Post</button>
                              <ul class="nav nav-pills">
                                  
                              </ul>
                          </footer>
                          </form>
            </section>   
            {% endif %}
            
            

           
            <section class="panel">
              <div class="panel-body">
                          <div class="panel-body profile-activity">
                              <h5 class="pull-left">Comments</h5>
                              {% for i in comments %}
                              <div class="activity blue">
                                  
                                  <span>
                                      <i class="fa fa-bullhorn"></i>
                                  </span>
                                  
                                  <div class="activity-desk">
                                      <div class="panel">
                                          <div class="panel-body">
                                              <div class="arrow"></div>
                                              <i class=" fa fa-time"></i>
                                              {% comment %}
                                              <h4>{{ i.user }}</h4>
                                              {% endcomment %}
                                              
                                              <h4><script>
                                              var date = new Date({{ i.js_time }});
                                              function formatAMPM(date) {
                                                var hours = date.getHours();
                                                var minutes = date.getMinutes();
                                                var ampm = hours >= 12 ? 'pm' : 'am';
                                                hours = hours % 12;
                                                hours = hours ? hours : 12; // the hour '0' should be '12'
                                                minutes = minutes < 10 ? '0'+minutes : minutes;
                                                var strTime = hours + ':' + minutes + ' ' + ampm;
                                                return strTime;
                                              }
                                              document.write(formatAMPM(date));
                                            </script></h4>
                                            <p>{{ i.message }}</p>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                              {% endfor %}
                          </div>
                        </div>
                      </section>
            
          </section>
          

      </section>

      
      <!--main content end-->

      
{% endblock %}

{% block jsfoot %}
<!-- js placed at the end of the document so the pages load faster -->
   
    <script class="include" type="text/javascript" src={% static "flatlab/admin/js/jquery.dcjqaccordion.2.7.js" %}></script>
    <script src={% static "flatlab/admin/js/jquery.scrollTo.min.js" %}></script>
    <script src={% static "flatlab/admin/js/jquery.nicescroll.js" %} type="text/javascript"></script>
    <script src={% static "flatlab/admin/js/jquery.sparkline.js" %} type="text/javascript"></script>
    <script src={% static "flatlab/admin/assets/jquery-easy-pie-chart/jquery.easy-pie-chart.js" %}></script>
    <script src={% static "flatlab/admin/js/owl.carousel.js" %} ></script>
    <script src={% static "flatlab/admin/js/jquery.customSelect.min.js" %} ></script>
    <script src={% static "flatlab/admin/js/respond.min.js" %} ></script>
    <script src={% static "flatlab/admin/assets/jquery-ui/jquery-ui-1.10.1.custom.min.js" %} type="text/javascript"></script>
    <script src={% static "flatlab/admin/js/jquery.ui.touch-punch.min.js" %}></script>
    <script src={% static "flatlab/admin/js/respond.min.js" %} ></script>
    <script type="text/javascript" src={% static "flatlab/admin/assets/gritter/js/jquery.gritter.js" %}></script>
    <script type="text/javascript" src={% static "flatlab/admin/js/jquery.pulsate.min.js" %}></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script src={% static "flatlab/admin/js/gmaps.js" %}></script>
    
    <!--right slidebar-->
    <script src={% static "flatlab/admin/js/slidebars.min.js" %}></script>

    <!--common script for all pages-->
    <script src={% static "flatlab/admin/js/common-scripts.js" %}></script>
    <script src={% static "flatlab/admin/js/gmaps-scripts.js" %}></script>


<!--script for this page-->
    <script src={% static "flatlab/admin/js/sparkline-chart.js" %}></script>
    <script src={% static "flatlab/admin/js/easy-pie-chart.js" %}></script>
    <script src={% static "flatlab/admin/js/count.js" %}></script>
    <script src={% static "flatlab/admin/js/gritter.js" %} type="text/javascript"></script>
    <script src={% static "flatlab/admin/js/pulstate.js" %} type="text/javascript"></script>

    <script>


    var events = {{ events_map|safe }};  
    // initializes maps
    var mapMarker = function (element, events) {
    
        var map = new GMaps({
            div: "#" + element,
            lat: events[0]["lat"],
            lng: events[0]["lng"]
        });
        
        for (i = 0; i < events.length; i++) { 
                map.addMarker({
                lat: events[i]["lat"],
                lng: events[i]["lng"],
                title: events[i]["tag"],
                infoWindow: {
                    content: events[i]["tag"]
                }
            });
            //Point = new GMaps.maps.LatLng( events[i]["lat"],events[i]["lng"]);
            //markerBounds.extend(Point);
        }

    }

    $(document).ready(function() {
        
        mapMarker('gmap_marker-1', events);  
        
        $('.back').click(function(){
            window.history.back();
            return false;
        });
               
      });

    
    
    </script>

{% endblock %}




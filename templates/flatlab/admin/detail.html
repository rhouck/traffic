{% extends 'flatlab/admin/base.html' %}
{% load staticfiles %}
{% load widget_tweaks %}

{% block body %}
      <!--main content start-->
      <section id="main-content">
          <section class="wrapper">
              
            <section class="panel">
                          
                          <div class="text-right">
                            <a class="back" href="#"><i class="fa fa-angle-double-left"></i> Back</a>                          
                          </div>
                          <header class="panel-heading summary-head">
                              
                              
                              <h4>{{ event.Name }}</h4>
                              
                              
                              {% if event.StartDate == event.EndDate %}
                                <p>{{ event.StartDate|date }}</p>
                              {% else %}
                                <p>{{ event.StartDate|date }} - {{ event.EndDate|date }}</p>
                              {% endif %}
                              
                          </header>
                          
                          <div class="panel-body">
                              <div class="panel-body bio-graph-info">
                              <h1>Details</h1>
                              <div class="row">
                                  <div class="bio-row">
                                      <p><span>Venue:</span></p><p> {{ event.VenueName }}</p>
                                  </div>
                                  <div class="bio-row">
                                      <p><span>Exp. Size:</span></p><p> {{ event.Capacity }} ppl</p>
                                  </div>
                                  <div class="bio-row">
                                      <p><span>Address:</span></p><p> {{ event.Address }}</p>
                                  </div>
                                  <div class="bio-row">
                                      <p><span>Start Time:</span></p><p> {{ event.pretty_StartTime }}</p>
                                  </div>
                                  <div class="bio-row">
                                      <p><span>City:</span></p><p> {{ event.City }}</p>
                                  </div>
                                  <div class="bio-row">
                                      <p><span>End Time:</span></p><p> {{ event.pretty_EndTime }}</p>
                                  </div>
                                  
                                  
                              </div>
                          </div>

                          </div>
            </section>            
            
            <section class="panel">
              <!-- this loads the map view -->
              <div id="date-1-map" class="tab-pane">
                      
                      <div class="row">
                        <div class="col-lg-12">
                              <div id="gmap_marker-1" class="gmaps"></div> 
                        </div>
                        
                      </div>

                      </div>
            </section>

            {% if form %}
            <section class="panel profile-info">
                          <form action="" method="post">
                              {% csrf_token %}
                              {{ form.message.errors }}
                              {{ form.message|add_class:"form-control input-lg p-text-area"}}
                              
                          
                          <footer class="panel-footer">
                              <button class="btn btn-danger pull-right" type="submit">Post</button>
                              <ul class="nav nav-pills">
                                  
                              </ul>
                          </footer>
                          </form>
            </section>   
            {% endif %}
            
           
            <section class="panel">
              <div class="panel-body">
                          <div class="panel-body profile-activity">
                              <h5 class="pull-left">Comments</h5>
                              {% for i in comments %}
                              <div class="activity blue">
                                  
                                  <span>
                                      <i class="fa fa-bullhorn"></i>
                                  </span>
                                  
                                  <div class="activity-desk">
                                      <div class="panel">
                                          <div class="panel-body">
                                              <div class="arrow"></div>
                                              <i class=" fa fa-time"></i>
                                              <h4>{{ i.user }}</h4>
                                              <p>{{ i.message }}</p>
                                              <p>{{ i.pretty_time }}</p>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                              {% endfor %}
                          </div>
                        </div>
                      </section>
            
            
          </section>
      </section>

      
      <!--main content end-->

      
{% endblock %}

{% block jsfoot %}
<!-- js placed at the end of the document so the pages load faster -->
   
    <script class="include" type="text/javascript" src={% static "flatlab/admin/js/jquery.dcjqaccordion.2.7.js" %}></script>
    <script src={% static "flatlab/admin/js/jquery.scrollTo.min.js" %}></script>
    <script src={% static "flatlab/admin/js/jquery.nicescroll.js" %} type="text/javascript"></script>
    <script src={% static "flatlab/admin/js/jquery.sparkline.js" %} type="text/javascript"></script>
    <script src={% static "flatlab/admin/assets/jquery-easy-pie-chart/jquery.easy-pie-chart.js" %}></script>
    <script src={% static "flatlab/admin/js/owl.carousel.js" %} ></script>
    <script src={% static "flatlab/admin/js/jquery.customSelect.min.js" %} ></script>
    <script src={% static "flatlab/admin/js/respond.min.js" %} ></script>
    <script src={% static "flatlab/admin/assets/jquery-ui/jquery-ui-1.10.1.custom.min.js" %} type="text/javascript"></script>
    <script src={% static "flatlab/admin/js/jquery.ui.touch-punch.min.js" %}></script>
    <script src={% static "flatlab/admin/js/respond.min.js" %} ></script>
    <script type="text/javascript" src={% static "flatlab/admin/assets/gritter/js/jquery.gritter.js" %}></script>
    <script type="text/javascript" src={% static "flatlab/admin/js/jquery.pulsate.min.js" %}></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script src={% static "flatlab/admin/js/gmaps.js" %}></script>
    
    <!--right slidebar-->
    <script src={% static "flatlab/admin/js/slidebars.min.js" %}></script>

    <!--common script for all pages-->
    <script src={% static "flatlab/admin/js/common-scripts.js" %}></script>
    <script src={% static "flatlab/admin/js/gmaps-scripts.js" %}></script>


<!--script for this page-->
    <script src={% static "flatlab/admin/js/sparkline-chart.js" %}></script>
    <script src={% static "flatlab/admin/js/easy-pie-chart.js" %}></script>
    <script src={% static "flatlab/admin/js/count.js" %}></script>
    <script src={% static "flatlab/admin/js/gritter.js" %} type="text/javascript"></script>
    <script src={% static "flatlab/admin/js/pulstate.js" %} type="text/javascript"></script>

    <script>
      
    var events = {{ events_map|safe }};  
    // initializes maps
    var mapMarker = function (element, events) {
    
        var map = new GMaps({
            div: "#" + element,
            lat: events[0]["lat"],
            lng: events[0]["lng"]
        });
        
        for (i = 0; i < events.length; i++) { 
                map.addMarker({
                lat: events[i]["lat"],
                lng: events[i]["lng"],
                title: events[i]["tag"],
                infoWindow: {
                    content: events[i]["tag"]
                }
            });
            Point = new GMaps.maps.LatLng( events[i]["lat"],events[i]["lng"]);
            markerBounds.extend(Point);
        }

    }

    $(document).ready(function() {
        
        mapMarker('gmap_marker-1', events);  
               
      });

    $(document).ready(function(){
        $('a.back').click(function(){
            parent.history.back();
            return false;
        });
    });
    </script>

{% endblock %}




{% extends 'flatlab/admin/base.html' %}
{% load staticfiles %}


{% block body %}
      <!--main content start-->
      <section id="main-content">
          <section class="wrapper">
              
              <!--tab nav start-->
              <section class="panel">
                  <header class="panel-heading tab-bg-dark-navy-blue ">
                      <ul class="nav nav-tabs">
                            {% for i in dates %}
                                {% if forloop.counter <= 5 %}
                                    {% if forloop.counter == 1 %}
                                        <li class="active" id="date-tab-{{ forloop.counter }}">
                                    {% else %}      
                                        <li class="" id="date-tab-{{ forloop.counter }}">
                                    {% endif %}
                                          <a data-toggle="tab" href="#date-{{ forloop.counter }}">{{i.0|date:'D'}}</a>
                                      </li>
                                {% endif %}
                            {% endfor %}
                          
                      </ul>
                  </header>
                  <div class="panel-body">
                      <div class="tab-content">

                            {% for d in dates %}
                                {% if forloop.counter <= 5 %}
                                
                                    {% if forloop.counter == 1 %}
                                        <div id="date-{{ forloop.counter }}" class="tab-pane active">
                                    {% else %}
                                        <div id="date-{{ forloop.counter }}" class="tab-pane ">
                                    {% endif %}

                                        <div class="text-center mbot30">
                                              <p class="t-info"></p>
                                              <h3 class="timeline-title">{{ d.0|date:'l' }}&nbsp&nbsp{{ d.0|date:'F, d' }}</h3>
                                              <!--<p class="t-info">Here's what you need to know</p>-->

                                        </div>      
                                    
                                    <div class="row">
                                        <div class='col-lg-12 col-sm-12'>
                                            {% if d.1 == 1 %}
                                                <div class="alert alert-warning fade in">   
                                                  <h4>
                                                      <i class="fa fa-ok-sign"></i>
                                                      Slow Day
                                                  </h4>
                                                  <p>Fewer or smaller events than average</p>
                                              </div>
                                            {% elif d.1 == 2 %}
                                              <div class="alert alert-success fade in">   
                                                  <h4>
                                                      <i class="fa fa-ok-sign"></i>
                                                      Average Day
                                                  </h4>
                                                  <p>Normal number and size of events</p>
                                              </div>
                                            {% else %}
                                                <div class="alert alert-info fade in">   
                                                  <h4>
                                                      <i class="fa fa-ok-sign"></i>
                                                      Busy Day
                                                  </h4>
                                                  <p>We see more and bigger events than average</p>
                                              </div>
                                            {% endif %}
                                        </div>
                                    </div>

  
                                    <section class="panel">
                                          <header class="tab-bg">
                                              <ul class="nav nav-tabs nav-justified">
                                        
                                                <li class="active">
                                                    <a data-toggle="tab" href="#date-{{ forloop.counter }}-timeline" >
                                                        <i class="fa fa-calendar text-danger"></i>
                                                        Timeline View
                                                    </a>
                                                </li>
                                                <li class="">
                                                  <a data-toggle="tab" href="#date-{{ forloop.counter }}-map" id="map-tab-{{ forloop.counter }}">
                                                    <i class="fa fa-map-marker text-primary"></i>
                                                      Map View</a>
                                                </li>
                                        
                                              </ul>
                                          </header>
                                          
                                          <div class="panel-body">
                                              <div class="tab-content">


                                                    <!-- this is the timeline view -->
                                                    <div id="date-{{ forloop.counter }}-timeline" class="tab-pane active">
                                                        
                                                
                                                        <div class="timeline">
                                                        
                                                            {% for k, v in events_timeline.items %}
                                                                {% if k == d.0 %}
                                                                    {% for i in v %}
                                                                        
                                                                        {% if i.index == 1 %}
                                                                          <article class="timeline-item">
                                                                              <div class="timeline-desk">
                                                                                  <div class="panel">
                                                                                    <a class="event-link" href="#myModal" data-toggle="modal" data-detail="{{ i.ajax_string}}">      
                                                                                      <div class="panel-body" >
                                                                            
                                                                                          <span class="arrow"></span>
                                                                                          <span class="timeline-icon red"></span>
                                                                                          
                                                                                          <span class="timeline-date">{{ i.pretty_EndTime }}</span>
                                                                                          <h1 class="red">{{ i.Capacity }} PPL</h1>
                                                                                          
                                                                                            <p><span>{{ i.Address }}</span></p>
                                                                                          
                                                                                      </div>
                                                                                    </a>
                                                                                  </div>
                                                                              </div>
                                                                          </article>
                                                                        {% endif %}

                                                                        {% if i.index == 2 %}
                                                                          <article class="timeline-item alt">
                                                                              <div class="timeline-desk">
                                                                                  <div class="panel">
                                                                                      <div class="panel-body">
                                                                                          <span class="arrow-alt"></span>
                                                                                          <span class="timeline-icon green"></span>
                                                                                          <span class="timeline-date">{{ i.pretty_EndTime }}</span>
                                                                                          <h1 class="green">{{ i.Capacity }} PPL</h1>
                                                                                          <p><span><a href="#" class="green">{{ i.Address }}</a></span></p>
                                                                                          
                                                                                      </div>
                                                                                  </div>
                                                                              </div>
                                                                          </article>
                                                                        {% endif %}

                                                                        {% if i.index == 3 %}
                                                                          <article class="timeline-item">
                                                                              <div class="timeline-desk">
                                                                                  <div class="panel">
                                                                                      <div class="panel-body">
                                                                                          <span class="arrow"></span>
                                                                                          <span class="timeline-icon blue"></span>
                                                                                          <span class="timeline-date">{{ i.pretty_EndTime }}</span>
                                                                                          <h1 class="blue">{{ i.Capacity }} PPL</h1>
                                                                                          <p><span><a href="#" class="blue">{{ i.Address }}</a></span></p>
                                                                                          
                                                                                          
                                                                                      </div>
                                                                                  </div>
                                                                              </div>
                                                                          </article>
                                                                        {% endif %}

                                                                        {% if i.index == 4 %}
                                                                          <article class="timeline-item alt">
                                                                            <div class="timeline-desk">
                                                                                <div class="panel">
                                                                                    <div class="panel-body">
                                                                                          <span class="arrow-alt"></span>
                                                                                          <span class="timeline-icon purple"></span>
                                                                                          <span class="timeline-date">{{ i.pretty_EndTime }}</span>
                                                                                          <h1 class="purple">{{ i.Capacity }} PPL</h1>
                                                                                          <p><span><a href="#" class="purple">{{ i.Address }}</a></span></p>
                                                                                          

                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                          </article>
                                                                        {% endif %}
                                                                      
                                                                    {% endfor %}
                                                                {% endif %}
                                                            {% endfor %}
                                                                
                                                        </div>
                                                        
                                                        <div class="clearfix">&nbsp;</div>


                                                    </div>
                                                
                                                    <!-- this loads the map view -->
                                                    <div id="date-{{ forloop.counter }}-map" class="tab-pane">
                                                            
                                                            <div class="row">
                                                              <div class="col-lg-12">
                                                                    <div id="gmap_marker-{{ forloop.counter }}" class="gmaps"></div> 
                                                              </div>
                                                              
                                                            </div>

                                                    </div>
                                              </div>
                                        </div>
                                    </section>
                                                                 
                                   
                                           
                                   </div>       
                                {% endif %}
                            {% endfor %}
                      </div>
                  </div>
              </section>
            
               
          </section>
      </section>
      <!--main content end-->

      
{% endblock %}

{% block jsfoot %}
<!-- js placed at the end of the document so the pages load faster -->
   
    <script class="include" type="text/javascript" src={% static "flatlab/admin/js/jquery.dcjqaccordion.2.7.js" %}></script>
    <script src={% static "flatlab/admin/js/jquery.scrollTo.min.js" %}></script>
    <script src={% static "flatlab/admin/js/jquery.nicescroll.js" %} type="text/javascript"></script>
    <script src={% static "flatlab/admin/js/jquery.sparkline.js" %} type="text/javascript"></script>
    <script src={% static "flatlab/admin/assets/jquery-easy-pie-chart/jquery.easy-pie-chart.js" %}></script>
    <script src={% static "flatlab/admin/js/owl.carousel.js" %} ></script>
    <script src={% static "flatlab/admin/js/jquery.customSelect.min.js" %} ></script>
    <script src={% static "flatlab/admin/js/respond.min.js" %} ></script>
    <script src={% static "flatlab/admin/assets/jquery-ui/jquery-ui-1.10.1.custom.min.js" %} type="text/javascript"></script>
    <script src={% static "flatlab/admin/js/jquery.ui.touch-punch.min.js" %}></script>
    <script src={% static "flatlab/admin/js/respond.min.js" %} ></script>
    <script type="text/javascript" src={% static "flatlab/admin/assets/gritter/js/jquery.gritter.js" %}></script>
    <script type="text/javascript" src={% static "flatlab/admin/js/jquery.pulsate.min.js" %}></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script src={% static "flatlab/admin/js/gmaps.js" %}></script>
    
    <!--right slidebar-->
    <script src={% static "flatlab/admin/js/slidebars.min.js" %}></script>

    <!--common script for all pages-->
    <script src={% static "flatlab/admin/js/common-scripts.js" %}></script>
    <script src={% static "flatlab/admin/js/gmaps-scripts.js" %}></script>


<!--script for this page-->
    <script src={% static "flatlab/admin/js/sparkline-chart.js" %}></script>
    <script src={% static "flatlab/admin/js/easy-pie-chart.js" %}></script>
    <script src={% static "flatlab/admin/js/count.js" %}></script>
    <script src={% static "flatlab/admin/js/gritter.js" %} type="text/javascript"></script>
    <script src={% static "flatlab/admin/js/pulstate.js" %} type="text/javascript"></script>

       

  <script>
    
    var events = {{ events_maps|safe }}
    
    if (events.length >= 1) {
        $("#map-tab-1").on('shown.bs.tab', function() {
            mapMarker('gmap_marker-1', events[0]);      
        }); 
    }
    if (events.length >= 2) {
        $("#map-tab-2").on('shown.bs.tab', function() {
            mapMarker('gmap_marker-2', events[1]);      
        }); 
    }
    if (events.length >= 3) {
        $("#map-tab-3").on('shown.bs.tab', function() {
            mapMarker('gmap_marker-3', events[2]);      
        }); 
    }
    if (events.length >= 4) {
        $("#map-tab-4").on('shown.bs.tab', function() {
            mapMarker('gmap_marker-4', events[3]);      
        }); 
    }
    if (events.length >= 5) {
        $("#map-tab-5").on('shown.bs.tab', function() {
            mapMarker('gmap_marker-5', events[4]);      
        }); 
    }
    
    // initializes maps
    var mapMarker = function (element, events) {
    
        var map = new GMaps({
            div: "#" + element,
            lat: events[0]["lat"],
            lng: events[0]["lng"]
        });
        
        for (i = 0; i < events.length; i++) { 
                map.addMarker({
                lat: events[i]["lat"],
                lng: events[i]["lng"],
                title: events[i]["tag"],
                infoWindow: {
                    content: events[i]["tag"]
                }
            });
        }
    }

    
   

    $(document).ready(function() {
            
            
            // owl carousel
            $("#owl-demo").owlCarousel({
              navigation : true,
              slideSpeed : 300,
              paginationSpeed : 400,
              singleItem : true,
              autoPlay:true

          });
            
      });
    

      //custom select box

      $(function(){
          $('select.styled').customSelect();
      });
    /*
    $('.event-link').on({
      click: function() {
        var that = this;
        that.data('datail')
      }
    })
    */
  </script>

{% endblock %}



